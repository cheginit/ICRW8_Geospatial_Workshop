<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.2.475" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

<meta name="dcterms.date" content="2023-06-05" />

<title>Introduction</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<!-- htmldependencies:E3FAD763 -->

<script src="Slides_files/libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="Slides_files/libs/jquery-3.5.1/jquery.min.js"></script>
<link href="Slides_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="Slides_files/libs/datatables-binding-0.17/datatables.js"></script>
<link href="Slides_files/libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="Slides_files/libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="Slides_files/libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="Slides_files/libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="Slides_files/libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <div id="quarto-toc-target"></div>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 5, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>
<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction">Introduction</a></li>
  <li><a href="#key-concepts-across-both-languages" id="toc-key-concepts-across-both-languages">Key Concepts Across Both languages</a>
  <ul>
  <li><a href="#proj-gdal" id="toc-proj-gdal">proj, gdal</a></li>
  <li><a href="#netcdf" id="toc-netcdf">netcdf</a></li>
  <li><a href="#requesting-web-services-apis" id="toc-requesting-web-services-apis">requesting web services (APIs)</a></li>
  <li><a href="#drainage-basins-and-catchments---mainstems-and-flowpaths" id="toc-drainage-basins-and-catchments---mainstems-and-flowpaths">drainage basins and catchments - mainstems and flowpaths</a></li>
  <li><a href="#geospatial-data-representation-fundamentals-simple-features-and-geospatial-grids" id="toc-geospatial-data-representation-fundamentals-simple-features-and-geospatial-grids">Geospatial data representation fundamentals, simple features and geospatial grids</a></li>
  </ul></li>
  <li><a href="#demonstration-of-key-concepts-in-each-language" id="toc-demonstration-of-key-concepts-in-each-language">Demonstration of Key Concepts in Each Language</a>
  <ul>
  <li><a href="#examples-in-r" id="toc-examples-in-r">Examples in R</a>
  <ul>
  <li><a href="#sf-simple-features" id="toc-sf-simple-features">sf: simple features</a></li>
  <li><a href="#terra-and-stars" id="toc-terra-and-stars">terra and stars</a></li>
  <li><a href="#httr-and-jsonlite" id="toc-httr-and-jsonlite">httr and jsonlite</a></li>
  </ul></li>
  <li><a href="#examples-in-python-will-be-in-a-separate-notebook-in-binder" id="toc-examples-in-python-will-be-in-a-separate-notebook-in-binder">Examples in Python (will be in a separate notebook in binder)</a></li>
  </ul></li>
  <li><a href="#use-cases" id="toc-use-cases">Use Cases</a>
  <ul>
  <li><a href="#first-show-how-satisfied" id="toc-first-show-how-satisfied">First show how satisfied?</a></li>
  <li><a href="#first-use-case-walk-through" id="toc-first-use-case-walk-through">First use case walk-through</a></li>
  <li><a href="#second-use-case-walk-through" id="toc-second-use-case-walk-through">Second use case walk-through</a></li>
  </ul></li>
  <li><a href="#data-access-summary-web-services-and-scalability" id="toc-data-access-summary-web-services-and-scalability">Data access summary – web services and scalability</a></li>
  <li><a href="#resources" id="toc-resources">Resources</a>
  <ul>
  <li><a href="#r" id="toc-r">R</a>
  <ul>
  <li><a href="#spatial-data" id="toc-spatial-data">Spatial Data</a></li>
  <li><a href="#web-services" id="toc-web-services">Web Services</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
<section id="introduction" class="level2">
<h2>Introduction</h2>
<p>Housekeeping, introductions</p>
</section>
<section id="key-concepts-across-both-languages" class="level2">
<h2>Key Concepts Across Both languages</h2>
<p>In both R and Python:</p>
<section id="proj-gdal" class="level3">
<h3>proj, gdal</h3>
<ul>
<li>Spatial data structures across languages and applications is primarily organized through <a href="https://www.osgeo.org">OSgeo</a> and <a href="https://www.ogc.org">OGC</a>) <em>and</em> a few core libraries underpin spatial libraries in programming languages and in software applications(R, Python, QGIS, ArcPro)!</li>
</ul>
<p>These libraries include:</p>
<ul>
<li><p><strong>PROJ</strong> –&gt; projections, transformations</p></li>
<li><p><strong>GEOS</strong> –&gt; Geometry operations (measures, relations)</p></li>
<li><p><strong>GDAL</strong> –&gt; geodata abstraction and processing (read, write)</p></li>
</ul>
</section>
<section id="netcdf" class="level3">
<h3>netcdf</h3>
</section>
<section id="requesting-web-services-apis" class="level3">
<h3>requesting web services (APIs)</h3>
<p>More and more data is available as web services, and the data is stored in a remote server in JSON, XML, HTML format which is accessible through API’s.</p>
<p><strong>JSON</strong> (JavaScript Object Notation) is a lightweight data-interchange format which is easy for machines to generate and parse; easy for humans to write and read.</p>
<p>Sample JSON format : { “data”: “Click Here”, “size”: 36, “style”: “bold”, “name”: “text1”, }</p>
<p><strong>API</strong> - An Application Programming Interface (API) takes a structured request from an application and returns structured results from the host application. With a <strong>Rest API</strong> you’re getting a representation of the requested data stored in a server. A <strong>Rest API</strong> also is what we call ‘stateless’, which means a server doesn’t store any data between requests from clients.</p>
<p><strong>Rest APIs</strong> access data through <strong>uniform resource identifiers (URIs)</strong>, which are essentially a string of characters that identify a specific resource. The type of URI used by a <strong>Rest API</strong> is a <strong>uniform resource locator (URL)</strong>.</p>
<p><strong>HTTP</strong> clients are used for accessing the API. <strong>HyperText Transfer Protocol (HTTP)</strong> enables communication between the client and server using <strong>HTTP</strong> methods. If we want to access or manipulate resources a <strong>Rest API</strong> uses specific request verbs we need to become familiar with:</p>
<ul>
<li><p>GET: used to acquire data from a database</p></li>
<li><p>POST: used to add data to a database</p></li>
<li><p>PUT: update the data in a database</p></li>
<li><p>DELETE: delete data in a database</p></li>
</ul>
</section>
<section id="drainage-basins-and-catchments---mainstems-and-flowpaths" class="level3">
<h3>drainage basins and catchments - mainstems and flowpaths</h3>
</section>
<section id="geospatial-data-representation-fundamentals-simple-features-and-geospatial-grids" class="level3">
<h3>Geospatial data representation fundamentals, simple features and geospatial grids</h3>
<ul>
<li><p>“Vector” data are comprised of points, lines, and polygons that represent discrete spatial entities, such as a river, watershed, or stream gauge.</p></li>
<li><p>“Raster” data divides spaces into rectilinear cells (pixels) to represent spatially continuous phenomena, such as elevation or the weather. The cell size (or resolution) defines the fidelity of the data.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="img/09-vec-raster.jpg" class="img-fluid" style="width:75.0%" /></p>
</figure>
</div>
</div>
</div>
<p>Simple Features (officially Simple Feature Access) is both an OGC and International Organization for Standardization (ISO) standard that specifies how (mostly) two-dimensional geometries can represent and describe objects in the real world. Simple features includes:</p>
<ul>
<li>a class hierarchy</li>
<li>a set of operations</li>
<li>binary and text encodings</li>
</ul>
<p>It describes how such objects can be stored in and retrieved from databases, and which geometrical operations should be defined for them.</p>
<p>It outlines how the spatial elements of POINTS (XY locations with a specific coordinate reference system) extend to LINES, POLYGONS and GEOMETRYCOLLECTION(s).</p>
<p>The “simple” adjective also refers to the fact that the line or polygon geometries are represented by sequences of points connected with straight lines that do not self-intersect.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="img/09-sf-model.png" class="img-fluid" style="width:75.0%" /></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="demonstration-of-key-concepts-in-each-language" class="level2">
<h2>Demonstration of Key Concepts in Each Language</h2>
<ul>
<li>drainage basins and catchments - mainstems and flowpaths</li>
<li>geospatial data representation fundamentals, simple features and geospatial grids</li>
</ul>
<section id="examples-in-r" class="level3">
<h3>Examples in R</h3>
<section id="sf-simple-features" class="level4">
<h4>sf: simple features</h4>
<p>In R, the <a href="https://cran.r-project.org/web/packages/sf/index.html"><code>sf</code> package</a> provides “<em>support for simple features, a standardized way to encode spatial vector data…. [and] Binds to ‘GDAL’ for reading and writing data, to ‘GEOS’ for geometrical operations, and to ‘PROJ’ for projection conversions and datum transformations.</em>”</p>
<p>When using R, you’ are’re using an interface to the core community standards, software, and practices (this isn’t exclusive to R). TO highlight this we can install (do this once) and attach <code>sf</code> to view the external dependencies versions of the libraries linked to <code>sf</code>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;sf&quot;)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package &#39;sf&#39; was built under R version 4.2.3</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sf_extSoftVersion</span>()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          GEOS           GDAL         proj.4 GDAL_with_GEOS     USE_PROJ_H 
       &quot;3.9.3&quot;        &quot;3.5.2&quot;        &quot;8.2.1&quot;         &quot;true&quot;         &quot;true&quot; 
          PROJ 
       &quot;8.2.1&quot; </code></pre>
</div>
</div>
<p>The bindings to these lower-level C libraries, and, the larger <code>sf</code> ecosystem in R can be seen below:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="img/09-sf-depends.png" class="img-fluid" style="width:75.0%" /></p>
</figure>
</div>
</div>
</div>
<p>In the <code>sf</code> implementation in the R ecosystem stores simple feature geometries (sfg) as part of a larger data.frame using a simple feature geometry list-column (sfg). The collection of attribute and spatial information define a simple feature that can be operated on in both table (SQL) and spatial (GEOS, etc) contexts. Not only does this allow us to make the most use of the growing spatial community but <em>also</em> of the growing data science community (see <code>ggplot</code>, <code>dplyr</code>, <code>data.table</code>, <code>dbplyr</code>, <code>arrow</code>, etc.)</p>
<p>In practice, an <code>sf</code> object in R looks like the following:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="img/sf_xfig.png" class="img-fluid" style="width:75.0%" /></p>
</figure>
</div>
</div>
</div>
<p>We can break this down following examples presented in the recently published <a href="https://r-spatial.org/book/03-Geometries.html">Spatial Data Science</a> by Edzar Pebesma and Rober Bivand. The most common simple feature geometries used to represent a <em>single</em> feature are:</p>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>POINT</code></td>
<td>single point geometry</td>
</tr>
<tr class="even">
<td><code>MULTIPOINT</code></td>
<td>set of points</td>
</tr>
<tr class="odd">
<td><code>LINESTRING</code></td>
<td>single linestring (two or more points connected by straight lines)</td>
</tr>
<tr class="even">
<td><code>MULTILINESTRING</code></td>
<td>set of linestrings</td>
</tr>
<tr class="odd">
<td><code>POLYGON</code></td>
<td>exterior ring with zero or more inner rings, denoting holes</td>
</tr>
<tr class="even">
<td><code>MULTIPOLYGON</code></td>
<td>set of polygons</td>
</tr>
<tr class="odd">
<td><code>GEOMETRYCOLLECTION</code></td>
<td>set of the geometries above</td>
</tr>
</tbody>
</table>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf) <span class="sc">|&gt;</span> <span class="fu">suppressPackageStartupMessages</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">1.2</span>,<span class="dv">1</span>))</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 1</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">st_point</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(p, <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;point&quot;</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 2</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>mp <span class="ot">&lt;-</span> <span class="fu">st_multipoint</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mp, <span class="at">pch =</span> <span class="dv">16</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;multipoint&quot;</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 3</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>ls <span class="ot">&lt;-</span> <span class="fu">st_linestring</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)))</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ls, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;linestring&quot;</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 4</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>mls <span class="ot">&lt;-</span> <span class="fu">st_multilinestring</span>(<span class="fu">list</span>(</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)),</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">0</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))))</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mls, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;multilinestring&quot;</span>)</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co"># 5 polygon</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>po <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>(<span class="fu">list</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))))</span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(po, <span class="at">border =</span> <span class="st">&#39;black&#39;</span>, <span class="at">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-35"><a href="#cb5-35" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;polygon&quot;</span>)</span>
<span id="cb5-36"><a href="#cb5-36" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-37"><a href="#cb5-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="co"># 6 multipolygon</span></span>
<span id="cb5-39"><a href="#cb5-39" aria-hidden="true" tabindex="-1"></a>mpo <span class="ot">&lt;-</span> <span class="fu">st_multipolygon</span>(<span class="fu">list</span>(</span>
<span id="cb5-40"><a href="#cb5-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</span>
<span id="cb5-41"><a href="#cb5-41" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))),</span>
<span id="cb5-42"><a href="#cb5-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">7</span>), <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">8</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">9</span>), <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">8</span>), <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">7</span>)))))</span>
<span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(mpo, <span class="at">border =</span> <span class="st">&#39;black&#39;</span>, <span class="at">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-44"><a href="#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;multipolygon&quot;</span>)</span>
<span id="cb5-45"><a href="#cb5-45" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span>
<span id="cb5-46"><a href="#cb5-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-47"><a href="#cb5-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 7 geometrycollection</span></span>
<span id="cb5-48"><a href="#cb5-48" aria-hidden="true" tabindex="-1"></a>gc <span class="ot">&lt;-</span> <span class="fu">st_geometrycollection</span>(<span class="fu">list</span>(po, ls <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>), <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)), <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">4</span>))))</span>
<span id="cb5-49"><a href="#cb5-49" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(gc, <span class="at">border =</span> <span class="st">&#39;black&#39;</span>, <span class="at">col =</span> <span class="st">&#39;#ff6666&#39;</span>, <span class="at">pch =</span> <span class="dv">16</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span>
<span id="cb5-50"><a href="#cb5-50" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">&quot;geometrycollection&quot;</span>)</span>
<span id="cb5-51"><a href="#cb5-51" aria-hidden="true" tabindex="-1"></a><span class="fu">box</span>(<span class="at">col =</span> <span class="st">&#39;grey&#39;</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Slides_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672" /></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>POINT (0 1)</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>mp</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>MULTIPOINT ((1 1), (2 2), (4 1), (2 3), (1 4))</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb10"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>ls</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>LINESTRING (1 1, 5 5, 5 6, 4 6, 3 4, 2 3)</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mls</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>MULTILINESTRING ((1 1, 5 5, 5 6, 4 6, 3 4, 2 3), (3 0, 4 1, 2 1))</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>po</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>POLYGON ((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2))</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>mpo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>MULTIPOLYGON (((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2)), ((3 7, 4 7, 5 8, 3 9, 2 8, 3 7)))</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb18"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>gc</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>GEOMETRYCOLLECTION (POLYGON ((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2)), LINESTRING (1 6, 5 10, 5 11, 4 11, 3 9, 2 8), POINT (2 5), POINT (5 4))</code></pre>
</div>
</div>
<p>This extends the idea of <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">“tidy” data</a> in that each row represents one observation, which has one geometric representation of the real world feature it describes.</p>
<p>An example of basic use:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb20"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define file path</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>(filename <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;shape/nc.shp&quot;</span>, <span class="at">package=</span><span class="st">&quot;sf&quot;</span>))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;C:/Users/mweber/R/library/sf/shape/nc.shp&quot;</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb22"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in file</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>(nc <span class="ot">&lt;-</span> <span class="fu">read_sf</span>(filename) )</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 100 features and 14 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965
Geodetic CRS:  NAD27
# A tibble: 100 × 15
    AREA PERIMETER CNTY_ CNTY_ID NAME   FIPS  FIPSNO CRESS…¹ BIR74 SID74 NWBIR74
   &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 0.114      1.44  1825    1825 Ashe   37009  37009       5  1091     1      10
 2 0.061      1.23  1827    1827 Alleg… 37005  37005       3   487     0      10
 3 0.143      1.63  1828    1828 Surry  37171  37171      86  3188     5     208
 4 0.07       2.97  1831    1831 Curri… 37053  37053      27   508     1     123
 5 0.153      2.21  1832    1832 North… 37131  37131      66  1421     9    1066
 6 0.097      1.67  1833    1833 Hertf… 37091  37091      46  1452     7     954
 7 0.062      1.55  1834    1834 Camden 37029  37029      15   286     0     115
 8 0.091      1.28  1835    1835 Gates  37073  37073      37   420     0     254
 9 0.118      1.42  1836    1836 Warren 37185  37185      93   968     4     748
10 0.124      1.43  1837    1837 Stokes 37169  37169      85  1612     1     160
# … with 90 more rows, 4 more variables: BIR79 &lt;dbl&gt;, SID79 &lt;dbl&gt;,
#   NWBIR79 &lt;dbl&gt;, geometry &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable name
#   ¹​CRESS_ID</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb24"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Map</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nc[<span class="st">&#39;SID79&#39;</span>])</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Slides_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672" /></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb25"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial measures!</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">st_area</span>(nc))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Units: [m^2]
[1] 1137107793  610916077 1423145355  694378925 1520366979  967504822</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb27"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial operations!</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_union</span>(nc) <span class="sc">|&gt;</span> <span class="fu">plot</span>()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_centroid</span>(nc)<span class="sc">$</span>geometry <span class="sc">|&gt;</span> <span class="fu">plot</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: st_centroid assumes attributes are constant over geometries</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Slides_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid" width="672" /></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb29"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data science operations</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: &#39;dplyr&#39;</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from &#39;package:stats&#39;:

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from &#39;package:base&#39;:

    intersect, setdiff, setequal, union</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb33"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(nc<span class="sc">$</span>geometry)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(<span class="fu">slice_max</span>(nc, AREA, <span class="at">n =</span> <span class="dv">10</span>)<span class="sc">$</span>geometry, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(<span class="fu">slice_max</span>(nc, AREA, <span class="at">n =</span><span class="dv">5</span>)<span class="sc">$</span>geometry, </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">plot</span>(<span class="fu">slice_max</span>(nc, AREA, <span class="at">n =</span> <span class="dv">1</span>)<span class="sc">$</span>geometry, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">col =</span> <span class="st">&quot;green&quot;</span>, <span class="at">add =</span> <span class="cn">TRUE</span>)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
<div class="cell-output-display">
<p><img src="Slides_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid" width="672" /></p>
</div>
</div>
</section>
<section id="terra-and-stars" class="level4">
<h4>terra and stars</h4>
<p>For accessing raster data - first look at terra:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb34"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(terra)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>terra 1.6.47</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb36"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gdal</span>()</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] &quot;3.5.2&quot;</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb38"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="fu">gdal</span>(<span class="at">drivers =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-0413e899a13c8dfedc22" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0413e899a13c8dfedc22">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196"],["AAIGrid","ACE2","ADRG","AIG","AirSAR","ARG","BAG","BIGGIF","BLX","BMP","BSB","BT","BYN","CAD","CALS","CEOS","COASP","COG","COSAR","CPG","CTable2","CTG","DAAS","DERIVED","DIMAP","DIPEx","DOQ1","DOQ2","DTED","ECRGTOC","EEDAI","EHdr","EIR","ELAS","ENVI","ERS","ESAT","ESRIC","FAST","FIT","GenBin","GFF","GIF","GPKG","GRASSASCIIGrid","GRIB","GS7BG","GSAG","GSBG","GSC","GTA","GTiff","GTX","GXF","HDF4","HDF4Image","HDF5","HDF5Image","HF2","HFA","HTTP","ILWIS","IRIS","ISCE","ISG","ISIS2","ISIS3","JAXAPALSAR","JDEM","JP2OpenJPEG","JPEG","KEA","KMLSUPEROVERLAY","KRO","L1B","LAN","LCP","Leveller","LOSLAS","MAP","MBTiles","MEM","MFF","MFF2","MRF","MSGN","NDF","netCDF","NGSGEOID","NGW","NITF","NTv2","NWT_GRC","NWT_GRD","OGCAPI","OZI","PAux","PDF","PDS","PDS4","PLMOSAIC","PLSCENES","PNG","PNM","PRF","R","Rasterlite","RIK","RMF","ROI_PAC","RPFTOC","RRASTER","RS2","RST","SAFE","SAGA","SAR_CEOS","SDTS","SENTINEL2","SGI","SIGDEM","SNODAS","SRP","SRTMHGT","STACIT","STACTA","Terragen","TGA","TIL","TSX","USGSDEM","VICAR","VRT","WCS","WEBP","WMS","WMTS","XPM","XYZ","Zarr","ZMap","AmigoCloud","AVCBin","AVCE00","Carto","CSV","CSW","DGN","DXF","EDIGEO","EEDA","Elasticsearch","ESRI Shapefile","ESRIJSON","FlatGeobuf","Geoconcept","GeoJSON","GeoJSONSeq","GeoRSS","GML","GNMDatabase","GNMFile","GPSBabel","GPX","Idrisi","JML","KML","LVBAG","MapInfo File","MapML","Memory","MVT","MySQL","OAPIF","ODS","OGR_GMT","OGR_PDS","OGR_SDTS","OGR_VRT","OpenFileGDB","OSM","PGDUMP","S57","Selafin","SQLite","SVG","SXF","TIGER","TopoJSON","UK .NTF","VDV","VFK","WAsP","WFS","XLS","XLSX"],["raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","raster","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector","vector"],["read/write","read","read/write","read","read","read/write","read/write","read","read/write","read/write","read","read/write","read/write","read","read/write","read","read","read/write","read","read","read/write","read","read","read","read","read","read","read","read/write","read","read","read/write","read","read/write","read/write","read/write","read","read","read","read/write","read","read","read/write","read/write","read","read/write","read/write","read/write","read/write","read","read/write","read/write","read/write","read","read","read/write","read","read","read/write","read/write","read","read/write","read","read/write","read","read/write","read/write","read","read","read/write","read/write","read/write","read/write","read/write","read","read/write","read/write","read/write","read","read","read/write","read/write","read/write","read/write","read/write","read","read","read/write","read","read/write","read/write","read/write","read","read/write","read","read","read/write","read/write","read","read/write","read","read","read/write","read/write","read","read/write","read/write","read","read/write","read/write","read","read/write","read","read/write","read","read/write","read","read","read","read/write","read/write","read","read","read/write","read","read","read/write","read","read","read","read/write","read/write","read/write","read","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read","read","read/write","read/write","read","read/write","read/write","read","read","read/write","read/write","read","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read/write","read","read/write","read/write","read","read/write","read/write","read/write","read/write","read/write","read","read/write","read/write","read","read","read","read","read","read/write","read/write","read/write","read/write","read","read","read","read","read","read/write","read","read/write","read","read","read/write"],[true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,true,true,true,false,false,true,true,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,false,true,true,true,true,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,false,true,true,true,false,true,false,true,true,true,true,true,true,true,true,true,true,false,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,false,true,false,true,true,true,false,false,true,true,true,true,true,true,true,true,false,false,false,true,true,true,true,true,true,true,false,true,false,false,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,true,false,true,true,false,true],["Arc/Info ASCII Grid","ACE2","ARC Digitized Raster Graphics","Arc/Info Binary Grid","AirSAR Polarimetric Image","Azavea Raster Grid format","Bathymetry Attributed Grid","Graphics Interchange Format (.gif)","Magellan topo (.blx)","MS Windows Device Independent Bitmap","Maptech BSB Nautical Charts","VTP .bt (Binary Terrain) 1.3 Format","Natural Resources Canada's Geoid","AutoCAD Driver","CALS (Type 1)","CEOS Image","DRDC COASP SAR Processor Raster","Cloud optimized GeoTIFF generator","COSAR Annotated Binary Matrix (TerraSAR-X)","Convair PolGASP","CTable2 Datum Grid Shift","USGS LULC Composite Theme Grid","Airbus DS Intelligence Data As A Service driver","Derived datasets using VRT pixel functions","SPOT DIMAP","DIPEx","USGS DOQ (Old Style)","USGS DOQ (New Style)","DTED Elevation Raster","ECRG TOC format","Earth Engine Data API Image","ESRI .hdr Labelled","Erdas Imagine Raw","ELAS","ENVI .hdr Labelled","ERMapper .ers Labelled","Envisat Image Format","Esri Compact Cache","EOSAT FAST Format","FIT Image","Generic Binary (.hdr Labelled)","Ground-based SAR Applications Testbed File Format (.gff)","Graphics Interchange Format (.gif)","GeoPackage","GRASS ASCII Grid","GRIdded Binary (.grb, .grb2)","Golden Software 7 Binary Grid (.grd)","Golden Software ASCII Grid (.grd)","Golden Software Binary Grid (.grd)","GSC Geogrid","Generic Tagged Arrays (.gta)","GeoTIFF","NOAA Vertical Datum .GTX","GeoSoft Grid Exchange Format","Hierarchical Data Format Release 4","HDF4 Dataset","Hierarchical Data Format Release 5","HDF5 Dataset","HF2/HFZ heightfield raster","Erdas Imagine Images (.img)","HTTP Fetching Wrapper","ILWIS Raster Map","IRIS data (.PPI, .CAPPi etc)","ISCE raster","International Service for the Geoid","USGS Astrogeology ISIS cube (Version 2)","USGS Astrogeology ISIS cube (Version 3)","JAXA PALSAR Product Reader (Level 1.1/1.5)","Japanese DEM (.mem)","JPEG-2000 driver based on OpenJPEG library","JPEG JFIF","KEA Image Format (.kea)","Kml Super Overlay","KOLOR Raw","NOAA Polar Orbiter Level 1b Data Set","Erdas .LAN/.GIS","FARSITE v.4 Landscape File (.lcp)","Leveller heightfield","NADCON .los/.las Datum Grid Shift","OziExplorer .MAP","MBTiles","In Memory Raster","Vexcel MFF Raster","Vexcel MFF2 (HKV) Raster","Meta Raster Format","EUMETSAT Archive native (.nat)","NLAPS Data Format","Network Common Data Format","NOAA NGS Geoid Height Grids","NextGIS Web","National Imagery Transmission Format","NTv2 Datum Grid Shift","Northwood Classified Grid Format .grc/.tab","Northwood Numeric Grid Format .grd/.tab","OGCAPI","OziExplorer Image File","PCI .aux Labelled","Geospatial PDF","NASA Planetary Data System","NASA Planetary Data System 4","Planet Labs Mosaics API","Planet Labs Scenes API","Portable Network Graphics","Portable Pixmap Format (netpbm)","Racurs PHOTOMOD PRF","R Object Data Store","Rasterlite","Swedish Grid RIK (.rik)","Raster Matrix Format","ROI_PAC raster","Raster Product Format TOC format","R Raster","RadarSat 2 XML Product","Idrisi Raster A.1","Sentinel-1 SAR SAFE Product","SAGA GIS Binary Grid (.sdat, .sg-grd-z)","CEOS SAR Image","SDTS Raster","Sentinel 2","SGI Image File Format 1.0","Scaled Integer Gridded DEM .sigdem","Snow Data Assimilation System","Standard Raster Product (ASRP/USRP)","SRTMHGT File Format","Spatio-Temporal Asset Catalog Items","Spatio-Temporal Asset Catalog Tiled Assets","Terragen heightfield","TGA/TARGA Image File Format","EarthWatch .TIL","TerraSAR-X Product","USGS Optional ASCII DEM (and CDED)","MIPL VICAR file","Virtual Raster","OGC Web Coverage Service","WEBP","OGC Web Map Service","OGC Web Map Tile Service","X11 PixMap Format","ASCII Gridded XYZ","Zarr","ZMap Plus Grid","AmigoCloud","Arc/Info Binary Coverage","Arc/Info E00 (ASCII) Coverage","Carto","Comma Separated Value (.csv)","OGC CSW (Catalog  Service for the Web)","Microstation DGN","AutoCAD DXF","French EDIGEO exchange format","Earth Engine Data API","Elastic Search","ESRI Shapefile","ESRIJSON","FlatGeobuf","Geoconcept","GeoJSON","GeoJSON Sequence","GeoRSS","Geography Markup Language (GML)","Geographic Network generic DB based model","Geographic Network generic file based model","GPSBabel","GPX","Idrisi Vector (.vct)","OpenJUMP JML","Keyhole Markup Language (KML)","Kadaster LV BAG Extract 2.0","MapInfo File","MapML","Memory","Mapbox Vector Tiles","MySQL","OGC API - Features","Open Document/ LibreOffice / OpenOffice Spreadsheet ","GMT ASCII Vectors (.gmt)","Planetary Data Systems TABLE","SDTS","VRT - Virtual Datasource","ESRI FileGDB","OpenStreetMap XML and PBF","PostgreSQL SQL dump","IHO S-57 (ENC)","Selafin","SQLite / Spatialite","Scalable Vector Graphics","Storage and eXchange Format","U.S. Census TIGER/Line","TopoJSON","UK .NTF","VDV-451/VDV-452/INTREST Data Format","Czech Cadastral Exchange Data Format","WAsP .map format","OGC WFS (Web Feature Service)","MS Excel format","MS Office Open XML spreadsheet"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>name<\/th>\n      <th>type<\/th>\n      <th>can<\/th>\n      <th>vsi<\/th>\n      <th>long.name<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="httr-and-jsonlite" class="level4">
<h4>httr and jsonlite</h4>
<p>In R, httr and jsonlite packages are used to consume the API’s that provide data in json format.</p>
<p><strong>httr</strong> httr provides us with an HTTP client to access the API with GET/POST methods, passing query parameters, and verifying the response with regard to the data format.</p>
<p><strong>jsonlite</strong> This R package is used to convert the received json format to reaedble R object or data frame. Jsonlite can also be used to convert R objects or a data frame to json format data type.</p>
<p>Along with these two packages, <code>rlist</code> in R can be used to perform additional manipulation on the received json response. <code>list.stack</code> and <code>list.select</code> are two important methods exposed by <code>rlist</code> which is useful to get parsed json data into a <code>tibble</code>.</p>
<p>To know more about these packages, type ?(httr), ?(jsonlite) and ?(rlist) in the console of Rstudio to view the documentation.</p>
<p>Example:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode" id="cb39"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr) </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite) </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rlist) </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>jsonResponse<span class="ot">&lt;-</span><span class="fu">GET</span>(<span class="st">&quot;http://api.worldbank.org/country?per_page=10&amp;region=OED&amp;lendingtype=LNX&amp;format=json&quot;</span>)</span></code></pre></div>
</details>
</div>
</section>
</section>
<section id="examples-in-python-will-be-in-a-separate-notebook-in-binder" class="level3">
<h3>Examples in Python (will be in a separate notebook in binder)</h3>
</section>
</section>
<section id="use-cases" class="level2">
<h2>Use Cases</h2>
<section id="first-show-how-satisfied" class="level3">
<h3>First show how satisfied?</h3>
<ul>
<li>hydro addressing and network navigation</li>
<li>catchment characteristics and accumulation</li>
<li>spatial data aggregation and resampling</li>
</ul>
</section>
<section id="first-use-case-walk-through" class="level3">
<h3>First use case walk-through</h3>
<p>In R here and in separate notebook for Python</p>
</section>
<section id="second-use-case-walk-through" class="level3">
<h3>Second use case walk-through</h3>
<p>In R here and in separate notebook for Python</p>
<p>etc</p>
</section>
</section>
<section id="data-access-summary-web-services-and-scalability" class="level2">
<h2>Data access summary – web services and scalability</h2>
</section>
<section id="resources" class="level2">
<h2>Resources</h2>
<section id="r" class="level3">
<h3>R</h3>
<section id="spatial-data" class="level4">
<h4>Spatial Data</h4>
<p><a href="https://r-spatial.org/book/">Spatial Data Science by Edzar Pebesma and Roger Bivand</a></p>
<p><a href="https://r.geocompx.org/">Geocomputation with R</a></p>
</section>
<section id="web-services" class="level4">
<h4>Web Services</h4>
<p><a href="https://rstudio-pubs-static.s3.amazonaws.com/480665_ba2655419209496dbb799f1c7d050673.html">Accessing REST API (JSON data) using httr and jsonlite</a> ### Python <a href="https://geopandas.org/en/stable/index.html">GeoPandas</a></p>
<p><a href="https://courses.spatialthoughts.com/python-foundation.html">Python Foundation for Spatial Analysis</a></p>
<p><a href="https://pythongis.org/index.html">Python for Geographic Data Analysis</a></p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->

</body>

</html>